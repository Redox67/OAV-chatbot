<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>School Chatbot - OAV Patharchepa</title>
<style>
    body {
        font-family: 'Poppins', sans-serif;
        background-color: #000;
        color: #fff;
        margin: 0;
        padding: 0;
    }

    header {
        text-align: center;
        background: linear-gradient(90deg, #1a1a1a, #333);
        padding: 20px;
        color: #00eaff;
        font-size: 1.6em;
        font-weight: bold;
        letter-spacing: 1px;
        text-shadow: 0 0 10px #00eaff;
    }

    .project-info {
        text-align: center;
        margin-top: -10px;
        font-size: 1em;
        color: #ccc;
    }

    .chat-container {
        width: 90%;
        max-width: 600px;
        background-color: #111;
        margin: 40px auto;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0px 0px 25px #00eaff40;
    }

    .chat-box {
        height: 400px;
        overflow-y: auto;
        border: 1px solid #333;
        border-radius: 10px;
        padding: 15px;
        background-color: #0a0a0a;
    }

    .chat-message {
        margin: 10px 0;
        padding: 10px;
        border-radius: 10px;
        line-height: 1.5;
    }

    .user {
        background-color: #00eaff25;
        text-align: right;
        color: #a0e9ff;
    }

    .bot {
        background-color: #00eaff10;
        text-align: left;
        color: #e0f7ff;
    }

    .input-area {
        display: flex;
        margin-top: 15px;
    }

    input {
        flex: 1;
        padding: 10px;
        border-radius: 10px;
        border: none;
        outline: none;
        background-color: #1a1a1a;
        color: white;
        font-size: 1em;
    }

    button {
        background-color: #00eaff;
        border: none;
        border-radius: 10px;
        padding: 10px 20px;
        margin-left: 10px;
        color: #000;
        cursor: pointer;
        transition: 0.3s;
        font-weight: bold;
    }

    button:hover {
        background-color: #00b8d4;
        transform: scale(1.05);
    }

    .mic-btn {
        background-color: #222;
        color: #00eaff;
        border: 1px solid #00eaff80;
    }

    footer {
        text-align: center;
        margin-top: 30px;
        color: #888;
        font-size: 0.9em;
    }
</style>
</head>
<body>

<header>
    ODISHA ADARSHA VIDYALAYA, PATHARCHEPA, BALANGIR
</header>
<p class="project-info">
    SCIENCE EXHIBITION PROJECT<br>
    <strong>By Sugyan Khamari | Class: XI(C)</strong>
</p>

<div class="chat-container">
    <div class="chat-box" id="chatBox">
        <div class="chat-message bot">üëã Hello! I‚Äôm your school chatbot. You can ask me questions like ‚ÄúWho is the Prime Minister of India?‚Äù or ‚ÄúWhat‚Äôs the capital of Odisha?‚Äù.</div>
    </div>
    <div class="input-area">
        <input type="text" id="userInput" placeholder="Type your question here...">
        <button onclick="sendMessage()">Send</button>
        <button class="mic-btn" onclick="startListening()">üé§</button>
    </div>
</div>

<footer>¬© 2025 OAV Patharchepa | Developed for Science Exhibition</footer>

<script>
    const chatBox = document.getElementById("chatBox");
    const input = document.getElementById("userInput");

    const answers = {
        "prime minister": "The Prime Minister of India is Narendra Modi.",
        "president": "The President of India is Droupadi Murmu.",
        "finance minister": "The Finance Minister of India is Nirmala Sitharaman.",
        "education minister": "The Education Minister of India is Dharmendra Pradhan.",
        "defence minister": "The Defence Minister of India is Rajnath Singh.",
        "principal": "The Principal of OAV Patharchepa is Mr. K. Jhankar.",
        "students": "There are about 500 students in OAV Patharchepa.",
        "states": "India has 28 states and 8 Union Territories.",
        "countries in india": "India is one single country, not made up of multiple countries üòä.",
        "how many countries": "India is one country, not made up of others."
    };

    const capitals = {
        "andhra pradesh": "Amaravati",
        "arunachal pradesh": "Itanagar",
        "assam": "Dispur",
        "bihar": "Patna",
        "chhattisgarh": "Raipur",
        "goa": "Panaji",
        "gujarat": "Gandhinagar",
        "haryana": "Chandigarh",
        "himachal pradesh": "Shimla",
        "jharkhand": "Ranchi",
        "karnataka": "Bengaluru",
        "kerala": "Thiruvananthapuram",
        "madhya pradesh": "Bhopal",
        "maharashtra": "Mumbai",
        "manipur": "Imphal",
        "meghalaya": "Shillong",
        "mizoram": "Aizawl",
        "nagaland": "Kohima",
        "odisha": "Bhubaneswar",
        "punjab": "Chandigarh",
        "rajasthan": "Jaipur",
        "sikkim": "Gangtok",
        "tamil nadu": "Chennai",
        "telangana": "Hyderabad",
        "tripura": "Agartala",
        "uttar pradesh": "Lucknow",
        "uttarakhand": "Dehradun",
        "west bengal": "Kolkata"
    };

    const greetings = ["hi", "hello", "hey", "good morning", "good evening", "good afternoon"];

    function sendMessage() {
        const userText = input.value.trim();
        if (!userText) return;
        addMessage(userText, "user");
        input.value = "";
        processMessage(userText);
    }

    function processMessage(text) {
        const lower = text.toLowerCase();
        let reply = "";

        if (greetings.some(g => lower.includes(g))) {
            reply = "Hello there! üòä How can I help you today?";
        } else {
            for (const state in capitals) {
                if (lower.includes(state)) {
                    reply = `The capital of ${state.charAt(0).toUpperCase() + state.slice(1)} is ${capitals[state]}.`;
                    break;
                }
            }
        }

        if (!reply) {
            for (const key in answers) {
                if (lower.includes(key)) {
                    reply = answers[key];
                    break;
                }
            }
        }

        if (!reply) {
            reply = "I'm not sure about that yet ü§î, but I'm still learning!";
        }

        addMessage(reply, "bot");
        speak(reply);
    }

    function addMessage(text, sender) {
        const msg = document.createElement("div");
        msg.classList.add("chat-message", sender);
        msg.innerText = text;
        chatBox.appendChild(msg);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    // üéôÔ∏è Speech Recognition
    function startListening() {
        if (!('webkitSpeechRecognition' in window)) {
            alert("Sorry, your browser doesn't support speech recognition üò¢");
            return;
        }

        const recognition = new webkitSpeechRecognition();
        recognition.lang = "en-IN";
        recognition.continuous = false;
        recognition.interimResults = false;
        recognition.start();

        recognition.onresult = (event) => {
            const speech = event.results[0][0].transcript;
            addMessage("üé§ " + speech, "user");
            processMessage(speech);
        };

        recognition.onerror = () => {
            addMessage("‚ùå Voice recognition error. Please try again.", "bot");
        };
    }

    // üó£Ô∏è Text-to-Speech (Soft Female Voice)
    function speak(text) {
        if ('speechSynthesis' in window) {
            const voices = window.speechSynthesis.getVoices();
            const femaleVoice = voices.find(v => 
                v.name.includes('Female') || v.name.includes('Google UK English Female') || v.name.includes('en-IN')
            );
            const utter = new SpeechSynthesisUtterance(text);
            utter.lang = "en-IN";
            utter.pitch = 1;
            utter.rate = 1;
            utter.voice = femaleVoice || voices[0];
            window.speechSynthesis.speak(utter);
        }
    }

    // Load voices properly (some browsers delay them)
    window.speechSynthesis.onvoiceschanged = () => {};
</script>
</body>
</html>